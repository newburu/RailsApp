<div class="record-container">
  <p class="page-title">今日の記録</p>
  <div class="goal-weight">目標体重:<%= @goal_weight %>kg</div>
</div>
<p class="index-left-items">本日のミッション</p>
<div class="index-left-items"><%= @today %></div>
<div class="index-left-items">
  <% if (@protein_amounts_sum - protein_amounts) >0 %>
    <p class="red-coment"><%="あと#{@protein_amounts_sum - protein_amounts}g食べましょう！" %></p>
  <% else %>
    <p class="green-coment">目標達成！！</p>
  <% end %>
</div>
<div class="index-left-items">
  <% if (@sugar_amounts_sum - sugar_amounts) >0 %>
    <p class="green-coment"><%="あと#{@sugar_amounts_sum - sugar_amounts}g食べれます" %></p>
  <%elsif (@sugar_amounts_sum - sugar_amounts) == 0 %>
    <p class="green-coment">ちょうどです</p>
  <% else %>
    <p class="red-coment"><%="#{(@sugar_amounts_sum - sugar_amounts).abs}gオーバしてます注意しましょう!!" %></p>
  <% end %>
</div>

<div class="index-left-items">
  <% if (@kcal_amounts_sum - kcal_amounts) > 0 %>
    <p class="green-coment"><%="あと#{@kcal_amounts_sum - kcal_amounts}kcal食べましょう！！" %></p>
  
  <%elsif @kcal_amounts_sum - kcal_amounts == 0 %>
    <p class="green-coment">ちょうどです</p>
  <% else %>
    <p class="red-coment"><%="#{(@kcal_amounts_sum - kcal_amounts).abs}kcalオーバしてます注意しましょう!!" %></p>
  <% end %>
</div>



  <p class="page-title">体重変化のグラフ</p>
  <canvas id="myLineChart" width="300" height="100"></canvas>
  
  <script>
  var ctx = document.getElementById("myLineChart");
  var myLineChart = new Chart(ctx, {
    type: 'line',
    data: {
    // labelsでグラフの横軸を設置している
      labels: [1,2,3,4,5],
      // データを代入
      datasets: [   
        {
        
        // データの名前
          label: '体重',
          data: [35, 34, 37, 35, 34, 35, 34, 25],
          borderColor: "rgba(255,0,0,1)",
          backgroundColor: "rgba(0,0,0,0)"          
        },
        {
        <% @goal_weight_array.each do |goal_weight_array| %>
          label: '目標体重',
          // データの値を配列で渡す
          data: [<%= goal_weight_array%>],
          <%binding.pry%>
          // グラフの色
          borderColor: "rgba(0,0,255,1)",
          backgroundColor: "rgba(0,0,0,0)"},
         <%end%>
        
      ],
    },
    options: {
      title: {
      // グラフタイトルの表示
        display: true,
        text: '体重の変化'
      },
      scales: {
        yAxes: [{
          ticks: {
          // グラフのy軸の最大値最小値などを設定
            suggestedMax: 120,
            suggestedMin: 20,
            stepSize: 10,
            callback: function(value, index, values){
              return  value +  'kg'
            }
          }
        }]
      },
    }
  });
  </script>